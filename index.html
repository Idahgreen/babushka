<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title></title>
</head>

<body>

    <header></header>
    <nav>
        <button id="filter-alle">Alle</button>
        <button id="filter-forretter">forretter</button>
        <button id="filter-hovedretter">hovedretter</button>
        <button id="filter-desserter">desserter</button>
        <button id="filter-sideorders">Side-orders</button>

    </nav>
    <main>
        <h1 class="overskrift"></h1>
        <div class="liste"> </div>
    </main>

    <div class="popup">
        <div class="popup-content"></div>
        <h2 class="single-titel"> </h2>
        <img src="" alt="" class="single-img">
        <details>
            <summary>Beskrivelse</summary>
            <p class="data-beskrivelse"></p>
        </details>
    </div>
    <template class="menutemplate">
    <article  class="ret">

        <img id="img">
        <h2 class="titel"> </h2>
        <div class="descript" ></div>
        <div>Pris: <span class="pris"></span><br></div>
    </article>
    </template>
    <footer>
        <section>
            <adress></adress>
            <aside></aside>
        </section>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", hentJson);



        let ret;
        async function hentJson() {
            let jsonData = await fetch("menu.json");
            ret = await jsonData.json();
            vis(ret, "Menu");
            lavFiltre();
        }

        function vis(ret, overskrift) {
            let temp = document.querySelector(".menutemplate");
            let dest = document.querySelector(".liste");
            dest.innerHTML = "";
            document.querySelector(".overskrift").textContent = overskrift;
            ret.forEach(menu => {
                let klon = temp.cloneNode(true).content;
                klon.querySelector(".titel").textContent = menu.navn;
                klon.getElementById("img").src = "imgs/small/" + menu.billede + "-sm.jpg";
                klon.querySelector(".descript").textContent = menu.kortbeskrivelse;
                klon.querySelector(".pris").textContent = menu.pris;
                klon.querySelector(".ret").setAttribute("data-id", menu.id);
                klon.querySelector(".ret").addEventListener("click", showSingle);
                dest.appendChild(klon);
            });
        };

        function showSingle() {
            console.log("bitch");
            let my_id = this.getAttribute("data-id");
            let single = ret.find(menu => {
                if (my_id == menu.id) {
                    console.log("Success", menu.navn);
                    document.querySelector(".popup").style.visibility = "visible";
                    document.querySelector(".single-titel").textContent = menu.navn;
                    document.getElementById("img").src = "imgs/medium/" + menu.billede + "-md.jpg";
                    document.querySelector(".data-beskrivelse").textContent = menu.langbeskrivelse;

                }
            });
        }


        function lavFiltre() {
            let foretter = ret.filter(menu => menu.kategori == "forretter");
            let hovedretter = ret.filter(menu => menu.kategori == "hovedretter");
            let desserter = ret.filter(menu => menu.kategori == "desserter");
            let drikkevarer = ret.filter(menu => menu.kategori == "drikkevarer");
            let sideorders = ret.filter(menu => menu.kategori == "sideorders");

            document.querySelector("#filter-alle").addEventListener("click", () => {
                vis(ret, "Menu");
            });
            document.querySelector("#filter-forretter").addEventListener("click", () => {
                vis(foretter, "Forretter");
            });
            document.querySelector("#filter-hovedretter").addEventListener("click", () => {
                vis(hovedretter, "Hovedretter");
            });
            document.querySelector("#filter-desserter").addEventListener("click", () => {
                vis(desserter, "Desserter");
            });

            document.querySelector("#filter-sideorders").addEventListener("click", () => {
                vis(sideorders, "Side-Orders");
            });

        }
    </script>
</body>

</html>
